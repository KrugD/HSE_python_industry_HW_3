# HSE Python Industry HW 3

ะญัะพั ะฟัะพะตะบั ะฟัะตะดััะฐะฒะปัะตั ัะพะฑะพะน API ะดะปั ัะพะบัะฐัะตะฝะธั ัััะปะพะบ, ะฝะฐะฟะธัะฐะฝะฝัะน ะฝะฐ **FastAPI**. ะะฝ ะฟะพะทะฒะพะปัะตั ัะพะทะดะฐะฒะฐัั ะบะพัะพัะบะธะต ัััะปะบะธ, ัะฟัะฐะฒะปััั ะธะผะธ, ะฐ ัะฐะบะถะต ะฟัะตะดะพััะฐะฒะปัะตั ััะฐัะธััะธะบั ะฟะพ ะธั ะธัะฟะพะปัะทะพะฒะฐะฝะธั.

---

## ๐ ะะฟะธัะฐะฝะธะต API

### ๐น ะัะฝะพะฒะฝัะต ะฒะพะทะผะพะถะฝะพััะธ:
1. **ะกะพะทะดะฐะฝะธะต ะบะพัะพัะบะพะน ัััะปะบะธ**:
   - โ ะะพัััะฟะฝะพ ะฒัะตะผ ะฟะพะปัะทะพะฒะฐัะตะปัะผ.
   - ๐ ะัะปะธ ะฟะพะปัะทะพะฒะฐัะตะปั ะฐะฒัะพัะธะทะพะฒะฐะฝ, ัััะปะบะฐ ะฑัะดะตั ะฟัะธะฒัะทะฐะฝะฐ ะบ ะตะณะพ ะฐะบะบะฐัะฝัั.

2. **ะะทะผะตะฝะตะฝะธะต ะบะพัะพัะบะพะน ัััะปะบะธ**:
   - ๐ ะะพัััะฟะฝะพ ัะพะปัะบะพ ะฒะปะฐะดะตะปััะฐะผ ัััะปะพะบ.

3. **ะะตัะตะฝะฐะฟัะฐะฒะปะตะฝะธะต ะฟะพ ะบะพัะพัะบะพะน ัััะปะบะต**:
   - ๐ ะะพัััะฟะฝะพ ะฒัะตะผ ะฟะพะปัะทะพะฒะฐัะตะปัะผ.

4. **ะะพะธัะบ ัััะปะพะบ ะฟะพ ะพัะธะณะธะฝะฐะปัะฝะพะผั URL**:
   - ๐ ะะพัััะฟะฝะพ ะฒัะตะผ ะฟะพะปัะทะพะฒะฐัะตะปัะผ.

5. **ะฃะดะฐะปะตะฝะธะต ัััะปะพะบ**:
   - โ ะะพัััะฟะฝะพ ัะพะปัะบะพ ะฒะปะฐะดะตะปััะฐะผ ัััะปะพะบ.
   - ๐ ะะดะผะธะฝะธัััะฐัะพัั ะผะพะณัั ัะดะฐะปััั ะฒัะต ัััะปะบะธ.

6. **ะกัะฐัะธััะธะบะฐ ะฟะพ ัััะปะบะฐะผ**:
   - ๐ ะะพะบะฐะทัะฒะฐะตั ะบะพะปะธัะตััะฒะพ ะฟะตัะตัะพะดะพะฒ, ะดะฐัั ัะพะทะดะฐะฝะธั ะธ ะฟะพัะปะตะดะฝะตะณะพ ะธัะฟะพะปัะทะพะฒะฐะฝะธั.

7. **ะะตะณะธัััะฐัะธั ะธ ะฐััะตะฝัะธัะธะบะฐัะธั ะฟะพะปัะทะพะฒะฐัะตะปะตะน**:
   - ๐ ะะพะปัะทะพะฒะฐัะตะปะธ ะผะพะณัั ัะตะณะธัััะธัะพะฒะฐัััั ะธ ะฒัะพะดะธัั ะฒ ัะธััะตะผั ั ะฟะพะผะพััั **JWT ัะพะบะตะฝะพะฒ**.

---

## ๐ ะัะธะผะตัั ะทะฐะฟัะพัะพะฒ

### ๐ 1. ะกะพะทะดะฐะฝะธะต ะบะพัะพัะบะพะน ัััะปะบะธ
```http
POST /shorten
Content-Type: application/json

{
  "original_url": "https://example.com",
  "short_code": "example",
  "expires_at": "2026-03-31T23:59:59"
}
```
๐ **ะัะฒะตั**:
```json
{
  "short_code": "example",
  "original_url": "https://example.com",
  "expires_at": "2026-03-31T23:59:59",
  "created_at": "2025-03-15T12:11:41",
  "user_id": 1
}
```

### ๐ 2. ะะตัะตะฝะฐะฟัะฐะฒะปะตะฝะธะต ะฟะพ ะบะพัะพัะบะพะน ัััะปะบะต
```http
GET /example/redirect
```
๐ **ะัะฒะตั**:
```json
{
  "url": "https://example.com"
}
```

### ๐ 3. ะะพะปััะตะฝะธะต ััะฐัะธััะธะบะธ ะฟะพ ัััะปะบะต
```http
GET /example/stats
```
๐ **ะัะฒะตั**:
```json
{
  "hits": 10,
  "created_at": "2025-03-15T12:00:00",
  "last_used": "2025-03-15T16:31:02"
}
```

### ๐ค 4. ะะตะณะธัััะฐัะธั ะฟะพะปัะทะพะฒะฐัะตะปั
```http
POST /register
Content-Type: application/json

{
  "username": "user1",
  "email": "user1@example.com",
  "password": "password123"
}
```
๐ **ะัะฒะตั**:
```json
{
  "username": "user1",
  "email": "user1@example.com",
  "role": "user"
}
```

### ๐ 5. ะััะตะฝัะธัะธะบะฐัะธั ะฟะพะปัะทะพะฒะฐัะตะปั
```http
POST /login
Content-Type: application/json

{
  "username": "user1",
  "password": "password123"
}
```
๐ **ะัะฒะตั**:
```json
{
  "access_token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
  "token_type": "bearer"
}
```

---

## ๐ ะะฝััััะบัะธั ะฟะพ ะทะฐะฟััะบั

### ๐ 1. ะฃััะฐะฝะพะฒะบะฐ ะทะฐะฒะธัะธะผะพััะตะน
ะฃะฑะตะดะธัะตัั, ััะพ ั ะฒะฐั ัััะฐะฝะพะฒะปะตะฝั **Docker** ะธ **Docker Compose**. ะะฐัะตะผ ะฒัะฟะพะปะฝะธัะต:
```bash
docker-compose up --build
```

### โถ๏ธ 2. ะะฐะฟััะบ ะฟัะธะปะพะถะตะฝะธั
ะะพัะปะต ัะฑะพัะบะธ ะบะพะฝัะตะนะฝะตัะพะฒ ะฟัะธะปะพะถะตะฝะธะต ะฑัะดะตั ะดะพัััะฟะฝะพ ะฟะพ ะฐะดัะตัั:
```
http://localhost:8000
```

### ๐ 3. ะะพะบัะผะตะฝัะฐัะธั API
- **Swagger UI**: [http://localhost:8000/docs](http://localhost:8000/docs)
- **ReDoc**: [http://localhost:8000/redoc](http://localhost:8000/redoc)

---

## ๐ ะะฟะธัะฐะฝะธะต ะฑะฐะทั ะดะฐะฝะฝัั

### ๐ ะขะฐะฑะปะธัั:

#### ๐งโ๐ป **ะะพะปัะทะพะฒะฐัะตะปะธ (users):**
- `id`: ะฃะฝะธะบะฐะปัะฝัะน ะธะดะตะฝัะธัะธะบะฐัะพั ะฟะพะปัะทะพะฒะฐัะตะปั.
- `username`: ะะผั ะฟะพะปัะทะพะฒะฐัะตะปั.
- `email`: ะญะปะตะบััะพะฝะฝะฐั ะฟะพััะฐ ะฟะพะปัะทะพะฒะฐัะตะปั.
- `hashed_password`: ะฅะตัะธัะพะฒะฐะฝะฝัะน ะฟะฐัะพะปั.
- `role`: ะะพะปั ะฟะพะปัะทะพะฒะฐัะตะปั (ะฝะฐะฟัะธะผะตั, `user` ะธะปะธ `admin`).

#### ๐ **ะกััะปะบะธ (links):**
- `id`: ะฃะฝะธะบะฐะปัะฝัะน ะธะดะตะฝัะธัะธะบะฐัะพั ัััะปะบะธ.
- `short_code`: ะะพัะพัะบะธะน ะบะพะด ัััะปะบะธ.
- `original_url`: ะัะธะณะธะฝะฐะปัะฝัะน URL.
- `expires_at`: ะะฐัะฐ ะธััะตัะตะฝะธั ััะพะบะฐ ะดะตะนััะฒะธั ัััะปะบะธ.
- `created_at`: ะะฐัะฐ ัะพะทะดะฐะฝะธั ัััะปะบะธ.
- `hits`: ะะพะปะธัะตััะฒะพ ะฟะตัะตัะพะดะพะฒ ะฟะพ ัััะปะบะต.
- `last_used`: ะะฐัะฐ ะฟะพัะปะตะดะฝะตะณะพ ะธัะฟะพะปัะทะพะฒะฐะฝะธั ัััะปะบะธ.
- `user_id`: ะะดะตะฝัะธัะธะบะฐัะพั ะฟะพะปัะทะพะฒะฐัะตะปั, ัะพะทะดะฐะฒัะตะณะพ ัััะปะบั.

---

## ๐ ะกัััะบัััะฐ ะฟัะพะตะบัะฐ
```
.
โโโ app
โ   โโโ auth.py              # ๐ ะััะตะฝัะธัะธะบะฐัะธั ะธ ะฐะฒัะพัะธะทะฐัะธั
โ   โโโ cache.py             # ๐พ ะััะธัะพะฒะฐะฝะธะต ัััะปะพะบ
โ   โโโ config.py            # โ๏ธ ะะฐัััะพะนะบะธ ะฟัะธะปะพะถะตะฝะธั
โ   โโโ crud.py              # ๐๏ธ ะะฟะตัะฐัะธะธ ั ะฑะฐะทะพะน ะดะฐะฝะฝัั
โ   โโโ database.py          # ๐ข๏ธ ะะพะดะบะปััะตะฝะธะต ะบ ะฑะฐะทะต ะดะฐะฝะฝัั
โ   โโโ main.py              # ๐ ะัะฝะพะฒะฝะพะน ัะฐะนะป ะฟัะธะปะพะถะตะฝะธั
โ   โโโ models.py            # ๐ฆ ะะพะดะตะปะธ ะฑะฐะทั ะดะฐะฝะฝัั
โ   โโโ routers              # ๐ ะะพััะตัั API
โ   โ   โโโ auth_users.py    # ๐ค ะะพััะตั ะดะปั ะฐััะตะฝัะธัะธะบะฐัะธะธ
โ   โ   โโโ links.py         # ๐ ะะพััะตั ะดะปั ัะฐะฑะพัั ั ัััะปะบะฐะผะธ
โ   โ   โโโ stats.py         # ๐ ะะพััะตั ะดะปั ััะฐัะธััะธะบะธ
โ   โโโ schemas.py           # ๐ ะกัะตะผั ะดะฐะฝะฝัั (Pydantic)
โ   โโโ utils.py             # ๐๏ธ ะัะฟะพะผะพะณะฐัะตะปัะฝัะต ััะฝะบัะธะธ
โโโ docker-compose.yml       # ๐ณ ะะพะฝัะธะณััะฐัะธั Docker Compose
โโโ Dockerfile               # ๐ฆ Dockerfile ะดะปั ัะฑะพัะบะธ ะพะฑัะฐะทะฐ
โโโ requirements.txt         # ๐ ะะฐะฒะธัะธะผะพััะธ Python
โโโ README.md                # ๐ ะญัะพั ัะฐะนะป
```


